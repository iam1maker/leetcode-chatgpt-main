题目编号：309

题目：最佳买卖股票时机含冷冻期

难度：中等

考察范围：动态规划

题干：

给定一个整数数组，其中第 i 个元素代表了第 i 天的股票价格 。​

设计一个算法计算出最大利润。在满足以下约束条件下，你可以尽可能地完成更多的交易（多次买卖一支股票）:

- 你不能同时持有多支股票，即必须在再次购买前出售掉之前的股票。
- 卖出股票后，你无法在第二天买入股票 (即冷冻期为 1 天)。

示例：

输入: [1,2,3,0,2]
输出: 3 
解释: 对于给定的输入数组, 
在第 i 天买入股票有两种情况（第 i 天卖出股票算作一次交易）：
- 在第 1 天买入，第 2 天卖出，利润 = 2 - 1 = 1
- 在第 3 天买入，第 4 天卖出，利润 = 2 - 0 = 2
在第 2 天买入，第 5 天卖出，利润 = 3 - 0 = 3
解题思路：

本题是一道动态规划的题目，我们可以使用 dp 数组来记录每一天的最大收益。

我们可以使用三个状态来表示每一天的状态：

- 持有股票的最大收益
- 不持有股票，处于冷冻期的最大收益
- 不持有股票，不处于冷冻期的最大收益

对于第 i 天的状态，我们可以根据前一天的状态来进行转移：

- 如果第 i 天持有股票，那么前一天可能是持有股票或者不持有股票，我们需要取两者中的最大值，即 dp[i][0] = max(dp[i-1][0], dp[i-1][2] - prices[i])
- 如果第 i 天不持有股票，且处于冷冻期，那么前一天一定是卖出了股票，即 dp[i][1] = dp[i-1][0] + prices[i]
- 如果第 i 天不持有股票，且不处于冷冻期，那么前一天可能是不持有股票且不处于冷冻期或者处于冷冻期，我们需要取两者中的最大值，即 dp[i][2] = max(dp[i-1][1], dp[i-1][2])

最终的答案就是 dp[n-1][1] 和 dp[n-1][2] 中的最大值。

解决方案：

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        if not prices:
            return 0
        n = len(prices)
        dp = [[0] * 3 for _ in range(n)]
        dp[0][0] = -prices[0]
        for i in range(1, n):
            dp[i][0] = max(dp[i-1][0], dp[i-1][2] - prices[i])
            dp[i][1] = dp[i-1][0] + prices[i]
            dp[i][2] = max(dp[i-1][1], dp[i-1][2])
        return max(dp[n-1][1], dp[n-1][2])
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。