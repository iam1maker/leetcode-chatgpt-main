题目编号：660

题目：移除 9

难度：中等

考察范围：数学

题干：给定一个整数 n，从 1 到 n 中，有多少个数包含数字 9？

解题思路：这道题可以用数学方法解决。我们可以先求出从 1 到 n 中，不包含数字 9 的数的个数，然后用总数减去不包含数字 9 的数的个数，就可以得到包含数字 9 的数的个数了。

对于不包含数字 9 的数，我们可以考虑每一位上的数字都不是 9，那么对于一个 k 位数，不包含数字 9 的数的个数就是 8^k。因此，我们可以先求出 n 的位数 k，然后计算出从 1 到 k-1 位的不包含数字 9 的数的个数，再计算出 k 位数中不包含数字 9 的数的个数，最后相加即可。

对于 k 位数中不包含数字 9 的数的个数，我们可以考虑每一位上的数字都有 8 种选择，因为不能选择数字 9，因此每一位上的数字有 9 种选择，但是如果第一位选择了 0，那么这个数就不再是 k 位数了，因此第一位只有 8 种选择。因此，k 位数中不包含数字 9 的数的个数就是 8 \times 9^{k-1}。

解决方案：

```python
class Solution:
    def newInteger(self, n: int) -> int:
        # 计算 n 的位数 k
        k = len(str(n))
        # 计算从 1 到 k-1 位的不包含数字 9 的数的个数
        count = sum(8 * 9 ** i for i in range(k-1))
        # 计算 k 位数中不包含数字 9 的数的个数
        for i, digit in enumerate(str(n)):
            if digit == '9':
                continue
            count += int(digit) * (8 ** (k-i-1)) * (9 ** i)
        # 计算包含数字 9 的数的个数
        return n - count
```

算法复杂度：时间复杂度为 O(\log n)，空间复杂度为 O(1)。