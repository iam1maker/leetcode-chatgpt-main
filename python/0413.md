题目编号：413

题目：等差数列划分

难度：中等

考察范围：动态规划

题干：

如果一个数列至少有三个元素，且任意两个相邻元素之差相同，则称该数列为等差数列。

例如，以下数列为等差数列:

1, 3, 5, 7, 9
7, 7, 7, 7
3, -1, -5, -9

以下数列不是等差数列。

1, 1, 2, 5, 7

数组 A 包含 N 个数，且索引从0开始。数组中的每个元素为 A[i]。

返回数组 A 中所有为等差数组的子数组个数。

解题思路：

本题可以使用动态规划来解决。

我们可以定义一个 dp 数组，其中 dp[i] 表示以 A[i] 结尾的等差数列的个数。

对于任意一个位置 i，如果 A[i] - A[i-1] == A[i-1] - A[i-2]，那么以 A[i] 结尾的等差数列的个数就是以 A[i-1] 结尾的等差数列的个数加 1，即 dp[i] = dp[i-1] + 1。

如果 A[i] - A[i-1] != A[i-1] - A[i-2]，那么以 A[i] 结尾的等差数列的个数就是 0，即 dp[i] = 0。

最终的答案就是 dp 数组中所有元素的和。

解决方案：

```python
class Solution:
    def numberOfArithmeticSlices(self, A: List[int]) -> int:
        n = len(A)
        if n < 3:
            return 0
        dp = [0] * n
        for i in range(2, n):
            if A[i] - A[i-1] == A[i-1] - A[i-2]:
                dp[i] = dp[i-1] + 1
        return sum(dp)
```

算法复杂度：时间复杂度为 O(n)，空间复杂度为 O(n)。