题目编号：391

题目：给定一个二维的网格图，每个格子可能是以下三种之一：

1. 空格子，用数字 0 表示。
2. 目标格子，用数字 1 表示。
3. 障碍格子，用数字 -1 表示。

你的任务是找到一条从起点到终点的路径，使得路径上的所有格子都是空格子，并且路径上的格子总数最少。

路径上的每一步只能从一个格子走到相邻的格子，也就是说，路径只能在上下左右四个方向之间进行选择。

注意：

起点和终点保证是空格子，并且不同于障碍格子。
你可以认为网格图的四周都被障碍物包围。

难度：困难

考察范围：图论、搜索算法

题干：

给定一个二维的网格图，每个格子可能是以下三种之一：

1. 空格子，用数字 0 表示。
2. 目标格子，用数字 1 表示。
3. 障碍格子，用数字 -1 表示。

你的任务是找到一条从起点到终点的路径，使得路径上的所有格子都是空格子，并且路径上的格子总数最少。

路径上的每一步只能从一个格子走到相邻的格子，也就是说，路径只能在上下左右四个方向之间进行选择。

注意：

起点和终点保证是空格子，并且不同于障碍格子。
你可以认为网格图的四周都被障碍物包围。

解题思路：

这道题可以使用 BFS（广度优先搜索）来解决。

首先，我们需要找到起点和终点的坐标。然后，我们可以使用一个队列来存储当前正在搜索的格子。我们从起点开始搜索，将其加入队列中。然后，我们不断从队列中取出格子进行搜索，直到找到终点或者队列为空。

在搜索过程中，我们需要记录每个格子的步数，即从起点到该格子的最短路径长度。我们可以使用一个二维数组来记录每个格子的步数。初始时，所有格子的步数都为 -1，表示未被访问过。当我们访问一个格子时，将其步数设置为当前格子的步数加一。

在搜索过程中，我们需要判断当前格子是否为终点。如果是，我们就可以直接返回当前格子的步数。否则，我们需要将当前格子的相邻格子加入队列中，并更新它们的步数。

需要注意的是，我们需要判断相邻格子是否为障碍格子或者已经访问过。如果是，我们就不需要将其加入队列中。

解决方案：

```python
from collections import deque

class Solution:
    def shortestPath(self, grid: List[List[int]]) -> int:
        m, n = len(grid), len(grid[0])
        start, end = None, None
        for i in range(m):
            for j in range(n):
                if grid[i][j] == 0:
                    grid[i][j] = -1
                elif grid[i][j] == 1:
                    end = (i, j)
                else:
                    grid[i][j] = -2
                if (i, j) == end:
                    start = (i, j)
        if not start or not end:
            return -1
        queue = deque([(start, 0)])
        visited = set([start])
        while queue:
            (i, j), steps = queue.popleft()
            if (i, j) == end:
                return steps
            for di, dj in [(0, 1), (0, -1), (1, 0), (-1, 0)]:
                ni, nj = i + di, j + dj
                if 0 <= ni < m and 0 <= nj < n and grid[ni][nj] == -1 and (ni, nj) not in visited:
                    queue.append(((ni, nj), steps + 1))
                    visited.add((ni, nj))
                    grid[ni][nj] = steps + 1
        return -1
```

算法复杂度：时间复杂度为 O(mn)，空间复杂度为 O(mn)。其中，m 和 n 分别为网格图的行数和列数。